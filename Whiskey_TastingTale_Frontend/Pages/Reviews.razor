@page "/reviews"
@using Whiskey_TastingTale_Backend.Model
@using Whiskey_TastingTale_Frontend.ViewModels
@inject DetailsViewModel ViewModel
@inject NavigationManager NavigationManager

<MudCard Class="card-fixed-size">
    <MudCardContent>
        <MudStack Row="true" Justify="Justify.SpaceAround">
            <MudCardMedia Image=@GetFullImageUrl(ViewModel.Selected.img_index) Class="image-fit"/>
            <MudStack>
                <MudText Typo="Typo.h5" >@ViewModel.Selected.whiskey_name</MudText>
                <MudStack Row="true">
                    <RatingComponent RatingValue=3.5></RatingComponent>
                    <MudText Typo="Typo.body2" > 3.4 / 5개의 리뷰 </MudText>
                </MudStack>
                <MudStack Row="true">
                    <MudText Typo="Typo.body2"><b>도수</b></MudText>
                    <MudText Typo="Typo.body2">@ViewModel.Selected.alcohol_degree%</MudText>
                </MudStack>
                <MudStack Row="true">
                    <MudText Typo="Typo.body2"><b>제조사</b></MudText>
                    <MudText Typo="Typo.body2">@ViewModel.Selected.maker </MudText>
                </MudStack>
            </MudStack>
        </MudStack>
    </MudCardContent>
</MudCard>

<MudGrid Spacing="1" Class="pt-2">
    @foreach (Review review in ViewModel.Reviews)
    {
        <MudItem xs="12" sm="12" md="12">
            <MudCard>
                <MudCardContent>
                    <MudStack>
                        <RatingComponent RatingValue=3.7></RatingComponent>
                        <MudStack>
                            <MudText Typo="Typo.body2" > @review.user_id </MudText>
                            <MudText Typo="Typo.body2" > @review.updated_date </MudText>
                            <MudText Typo="Typo.body2" > @review.review_text  </MudText>
                        </MudStack>
                    </MudStack>
                </MudCardContent>
            </MudCard>
        </MudItem>
    }
</MudGrid>



@code {
    private string GetFullImageUrl(string imagePath)
    {
        return "https://localhost:7299/images/" + imagePath;
    }
}
